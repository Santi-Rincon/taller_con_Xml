package co.edu.uptc.model;

import java.io.File;
import java.io.IOException;
import java.util.List;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.SAXException;


public class XMLParserSAXProduct {

    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);
        System.out.println("===== MENÚ =====");
        System.out.println("1. Ver productos");
        System.out.println("2. Ver envíos");
        System.out.print("Seleccione una opción: ");
        int opcion = scanner.nextInt();

        SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();

        try {
            SAXParser saxParser = saxParserFactory.newSAXParser();

            switch (opcion) {
                case 1:
                    ProductHandler productHandler = new ProductHandler();
                    saxParser.parse(new File("src\\data\\products.xml"), productHandler);
                    List<Product> productList = productHandler.getProductList();

                    System.out.println("\n--- Lista de Productos ---");
                    for (Product product : productList) {
                        System.out.println(product.getProductId() + " - " +
                                           product.getDescription() + " - " +
                                           product.getPresentation());
                    }
                    break;

                case 2:
                    ShippingHandler shippingHandler = new ShippingHandler();
                    saxParser.parse(new File("src\\data\\shipping.xml"), shippingHandler);
                    List<Shipping> shippingList = shippingHandler.getShippingList();

                    System.out.println("\n--- Lista de Envíos ---");
                    for (Shipping shipping : shippingList) {
                        System.out.println(shipping.getId() + " - " +
                                           shipping.getNameTransport() + " - " +
                                           shipping.getStatus() + " - " +
                                           shipping.getDate());
                    }
                    break;

                default:
                    System.out.println("Opción inválida.");
            }

        } catch (ParserConfigurationException | SAXException | IOException e) {
            e.printStackTrace();
        }

    }
}